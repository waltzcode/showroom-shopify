(function(){"use strict";var a,b,c,d,e;a=angular.module("showroomApp",["ngRoute","showroomServices","showroomControllers","showroomFilters","showroomDirectives"]),e=angular.module("showroomServices",["ngCookies","ngSanitize","com.2fdevs.videogular","com.2fdevs.videogular.plugins.poster"]),b=angular.module("showroomControllers",[]),d=angular.module("showroomFilters",[]),c=angular.module("showroomDirectives",[]),a.constant("SHOWROOM_CONSTANTS",{serviceHost:"//services.showroomapp.net",sessionParam:"showroomSId",serviceBundleId:"showroom.ios",serviceVersion:"1.0.8",registerSessionURL:"/session/register",getGlobalLastestFeedURL:"/feed/latest/",getGlobalMostLikeFeedURL:"/feed/most/like/",getGlobalMostViewFeedURL:"/feed/most/view/",getGlobalMostShareFeedURL:"/feed/most/share/",getGlobalFeaturedFeedURL:"/feed/featured/",getPersonalFeedURL:"/account/me/feed/",getPersonalShowURL:"/show/me/list/",registerEmailAccountURL:"/account/email/register/",resetEmailAccountPasswordURL:"/account/email/resetpassword/",changeEmailAccountPasswordURL:"/account/email/changepassword/",loginEmailAccountURL:"/account/email/login/",loginFacebookAccountURL:"/account/facebook/login/",getLoggedInAccountInfoURL:"/account/me/info/",logoutURL:"/account/me/logout/",showroomCDN:"//cdn.showroomapp.tv/"}),a.config(["$interpolateProvider","$sceDelegateProvider","$sceProvider",function(a,b,c){return a.startSymbol("{[{").endSymbol("}]}"),b.resourceUrlWhitelist(["self","http://cdn.shopify.com/**","https://cdn.shopify.com/**"]),c.enabled(!1)}]),a.run(["$rootScope","$log","userService","$q",function(a,b,c,d){return c.getLoggedInAccountInfo().then(function(b){return 1e3===b.code?(a.loggedIn=!0,a.userInfo=b.payload):void 0})["catch"](function(a){return b.error(a)}),a.logout=function(){return c.logout().then(function(b){return a.loggedIn=!1,a.userInfo=void 0})["catch"](function(a){return b.error(a)})}}]),angular.module("showroomApp").config(["$routeProvider",function(a){return a.when("/",{templateUrl:"{{ 'views-home.html' | asset_url }}",controller:"HomeController"}).when("/login",{templateUrl:"{{ 'views-login.html' | asset_url }}",controller:"LoginController"}).when("/signup",{templateUrl:"{{ 'views-signup.html' | asset_url }}",controller:"SignUpController"}).when("/featured",{templateUrl:"{{ 'views-list-show.html' | asset_url }}",controller:"FeatureController"}).when("/popular",{templateUrl:"{{ 'views-list-show.html' | asset_url }}",controller:"PopularController"}).when("/newest",{templateUrl:"{{ 'views-list-show.html' | asset_url }}",controller:"NewsetController"}).when("/myshow",{templateUrl:"{{ 'views-list-show.html' | asset_url }}",controller:"MyShowController"}).otherwise({templateUrl:"{{ 'views-home.html' | asset_url }}",controller:"HomeController"})}]),angular.module("showroomServices").factory("facebookService",["$q","$window",function(a,b){return{checkLoginStatus:function(){var c;return c=a.defer(),b.FB.getLoginStatus(function(a){return!a||a.erorr?c.reject(a.error||"Facebook::Error when check login status."):c.resolve(a)}),c.promise},login:function(){var c;return c=a.defer(),b.FB.login(function(a){return!a||a.erorr?c.reject(a.error||"Facebook::Error when login."):c.resolve(a)}),c.promise}}}]),angular.module("showroomServices").factory("sessionService",["$cookies","$http","$q","SHOWROOM_CONSTANTS",function(a,b,c,d){return{getSessionId:function(){var e,f,g,h,i,j;return f=c.defer(),j=a.get(d.sessionParam),i=new Date,g=new Date(i.getTime()+2e6),h=function(){var a;return a=function(a){var b;return b=(Math.random().toString(16)+"000000000").substr(2,8),a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b},a()+a(!0)+a(!0)+a()},e={deviceId:h(),model:"WC_MR.Richard",name:"Website Client",osName:"",osVersion:"",bundleId:d.serviceBundleId,bundleVersion:d.serviceVersion,langCode:""},j?(a.put(d.sessionParam,j,{expires:g}),f.resolve(j)):b.post(d.serviceHost+d.registerSessionURL,{data:e}).then(function(b){return 1e3===b.code?(a.put(d.sessionParam,b.payload.sessionId,{expires:g}),f.resolve(b.payload.sessionId)):f.reject(b.message)})["catch"](function(a){return f.reject(a)}),f.promise},callService:function(a,c,e){return this.getSessionId().then(function(f){var g;return g=d.serviceHost+c+f,b({url:g,method:a,data:e})})}}}]),angular.module("showroomServices").factory("showService",["SHOWROOM_CONSTANTS","sessionService","$http","$q",function(a,b){var c;return c=function(a,b){var c,d;return c=b.pageNumber||0,d=b.pageSize||15,a+c+"/"+d+"/"},{getGlobalLastestFeed:function(d){return b.callService("GET",c(a.getGlobalLastestFeedURL))},getGlobalMostLikeFeed:function(d){return b.callService("GET",c(a.getGlobalMostLikeFeedURL))}}}]),angular.module("showroomServices").factory("userService",["SHOWROOM_CONSTANTS","sessionService",function(a,b){return{registerEmailAccount:function(c){return b.callService("POST",a.registerEmailAccountURL,c)},resetEmailAccountPassword:function(c){return b.callService("POST",a.resetEmailAccountPasswordURL,c)},changeEmailAccountPassword:function(c){return b.callService("POST",a.changeEmailAccountPasswordURL,c)},loginEmailAccount:function(c){return b.callService("PUT",a.loginEmailAccountURL,c)},loginFacebookAccount:function(c){return b.callService("PUT",a.loginFacebookAccountURL,c)},getLoggedInAccountInfo:function(){return b.callService("GET",a.getLoggedInAccountInfoURL,null)},logout:function(){return b.callService("GET",a.logoutURL,null)}}}])}).call(this);